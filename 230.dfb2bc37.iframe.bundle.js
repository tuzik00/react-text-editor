"use strict";(self.webpackChunkreact_txt_editor=self.webpackChunkreact_txt_editor||[]).push([[230],{"./src/components/App/App.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>App_App});var _templateObject,react=__webpack_require__("./node_modules/react/index.js"),useDebouncedCallback=__webpack_require__("./node_modules/use-debounce/esm/useDebouncedCallback.js"),taggedTemplateLiteral=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),BodyStyles=(0,emotion_react_browser_esm.iv)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.Z)(["\n  @font-face {\n    font-family: 'Material Icons';\n    font-style: normal;\n    font-weight: 400;\n    src: url(https://fonts.gstatic.com/s/materialicons/v118/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format('woff2');\n  }\n\n  .material-icons {\n    font-family: 'Material Icons';\n    font-weight: normal;\n    font-style: normal;\n    font-size: 24px;\n    line-height: 1;\n    letter-spacing: normal;\n    text-transform: none;\n    display: inline-block;\n    white-space: nowrap;\n    word-wrap: normal;\n    direction: ltr;\n    -webkit-font-feature-settings: 'liga';\n    -webkit-font-smoothing: antialiased;\n  }\n"]))),GlobalStyles=(0,react.memo)((function(){return(0,jsx_runtime.jsx)(emotion_react_browser_esm.xB,{styles:BodyStyles})}));try{GlobalStyles.displayName="GlobalStyles",GlobalStyles.__docgenInfo={description:"",displayName:"GlobalStyles",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/GlobalStyles/GlobalStyles.tsx#GlobalStyles"]={docgenInfo:GlobalStyles.__docgenInfo,name:"GlobalStyles",path:"src/components/GlobalStyles/GlobalStyles.tsx#GlobalStyles"})}catch(__react_docgen_typescript_loader_error){}var ChangeTypes_ChangeTypes,objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),wrapRegExp=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/wrapRegExp.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),immutable_es=__webpack_require__("./node_modules/immutable/dist/immutable.es.js"),Draft=__webpack_require__("./node_modules/draft-js/lib/Draft.js"),StateTypes=__webpack_require__("./src/constants/StateTypes.ts");!function(ChangeTypes){ChangeTypes.INSERT_FRAGMENT="insert-fragment",ChangeTypes.CHANGE_BLOCK_TYPE="change-block-type",ChangeTypes.SPLIT_BLOCK="split-block",ChangeTypes.REMOVE_RANGE="remove-range",ChangeTypes.CHANGE_BLOCK_DATA="change-block-data",ChangeTypes.CHANGE_INLINE_STYLE="change-inline-style"}(ChangeTypes_ChangeTypes||(ChangeTypes_ChangeTypes={}));var HandledTypes,BlockTypes=__webpack_require__("./src/constants/BlockTypes.ts"),KeyCommands_DELETE="delete",KeyCommands_BACKSPACE="backspace";!function(HandledTypes){HandledTypes.HANDLED="handled",HandledTypes.NOT_HANDLED="not-handled"}(HandledTypes||(HandledTypes={}));var ActionType,ShortcutKeys={"> ":BlockTypes.P.BLOCKQUOTE,"*. ":BlockTypes.P.UL,"* ":BlockTypes.P.UL,"- ":BlockTypes.P.UL,"1. ":BlockTypes.P.OL,"## ":BlockTypes.P.H2,"### ":BlockTypes.P.H3,"==":BlockTypes.P.UNSTYLED},draftjs_utils=__webpack_require__("./node_modules/draftjs-utils/lib/draftjs-utils.js"),getBlockType=function getBlockType(editorState){var contentState=editorState.getCurrentContent(),anchorKey=editorState.getSelection().getAnchorKey();return contentState.getBlockForKey(anchorKey).getType()},getCurrentBlock=function getCurrentBlock(editorState){var selectionState=editorState.getSelection();return editorState.getCurrentContent().getBlockForKey(selectionState.getStartKey())},removeBlock=function removeBlock(editorState,block){var removeDirection=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"backward";if(!block)return editorState;var blockKey=block.getKey(),content=editorState.getCurrentContent(),contentBlock=content.getBlockForKey(blockKey),targetRange=new Draft.SelectionState({anchorKey:blockKey,anchorOffset:0,focusKey:blockKey,focusOffset:contentBlock.getLength()}),withoutTeX=Draft.Modifier.removeRange(content,targetRange,removeDirection),resetBlock=Draft.Modifier.setBlockType(withoutTeX,withoutTeX.getSelectionAfter(),BlockTypes.P.UNSTYLED),newState=Draft.EditorState.push(editorState,resetBlock,ChangeTypes_ChangeTypes.REMOVE_RANGE);return Draft.EditorState.forceSelection(newState,resetBlock.getSelectionAfter())},resetBlockWithType=function resetBlockWithType(editorState){var newType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BlockTypes.P.UNSTYLED,overrides=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},contentState=editorState.getCurrentContent(),selectionState=editorState.getSelection(),key=selectionState.getStartKey(),blockMap=contentState.getBlockMap(),block=blockMap.get(key),newBlock=null==block?void 0:block.mergeDeep(overrides,{type:newType,data:{}}),newContentState=contentState.merge({blockMap:blockMap.set(key,new Draft.ContentBlock(newBlock)),selectionAfter:selectionState.merge({anchorOffset:0,focusOffset:0})});return Draft.EditorState.push(editorState,new Draft.ContentState(newContentState),ChangeTypes_ChangeTypes.CHANGE_BLOCK_TYPE)},Menu=__webpack_require__("./node_modules/@mui/material/Menu/Menu.js"),MenuItem=__webpack_require__("./node_modules/@mui/material/MenuItem/MenuItem.js"),AddCircle=__webpack_require__("./node_modules/@mui/icons-material/AddCircle.js"),ArrowBack=__webpack_require__("./node_modules/@mui/icons-material/ArrowBack.js"),TextFields=__webpack_require__("./node_modules/@mui/icons-material/TextFields.js"),TextField=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js"),Box_Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Divider=__webpack_require__("./node_modules/@mui/material/Divider/Divider.js"),EntityTypes=__webpack_require__("./src/constants/EntityTypes.ts");!function(ActionType){ActionType[ActionType.BLOCK=0]="BLOCK",ActionType[ActionType.ENTITY=1]="ENTITY",ActionType[ActionType.INLINE=2]="INLINE"}(ActionType||(ActionType={}));var GroupTypes,FormatItalic=__webpack_require__("./node_modules/@mui/icons-material/FormatItalic.js"),StrikethroughS=__webpack_require__("./node_modules/@mui/icons-material/StrikethroughS.js"),FormatListBulleted=__webpack_require__("./node_modules/@mui/icons-material/FormatListBulleted.js"),FormatListNumbered=__webpack_require__("./node_modules/@mui/icons-material/FormatListNumbered.js"),FormatQuote=__webpack_require__("./node_modules/@mui/icons-material/FormatQuote.js"),AddLink=__webpack_require__("./node_modules/@mui/icons-material/AddLink.js"),FormatBold=__webpack_require__("./node_modules/@mui/icons-material/FormatBold.js"),LinkOff=__webpack_require__("./node_modules/@mui/icons-material/LinkOff.js"),InlineStyleTypes=__webpack_require__("./src/constants/InlineStyleTypes.ts");!function(GroupTypes){GroupTypes[GroupTypes.HEADING=0]="HEADING",GroupTypes[GroupTypes.INLINE=1]="INLINE",GroupTypes[GroupTypes.LINK=2]="LINK",GroupTypes[GroupTypes.BLOCK=3]="BLOCK"}(GroupTypes||(GroupTypes={}));var configButtons=[{group:GroupTypes.HEADING,buttons:[{inactiveIcon:"H1",activeIcon:"H1",type:BlockTypes.P.H1,actionType:ActionType.BLOCK},{inactiveIcon:"H2",activeIcon:"H2",type:BlockTypes.P.H2,actionType:ActionType.BLOCK},{inactiveIcon:"H3",activeIcon:"H3",type:BlockTypes.P.H3,actionType:ActionType.BLOCK},{inactiveIcon:"H4",activeIcon:"H4",type:BlockTypes.P.H4,actionType:ActionType.BLOCK},{inactiveIcon:"H5",activeIcon:"H5",type:BlockTypes.P.H5,actionType:ActionType.BLOCK},{inactiveIcon:"H6",activeIcon:"H6",type:BlockTypes.P.H6,actionType:ActionType.BLOCK}]},{group:GroupTypes.INLINE,buttons:[{inactiveIcon:(0,jsx_runtime.jsx)(FormatBold.Z,{}),activeIcon:(0,jsx_runtime.jsx)(FormatBold.Z,{}),type:InlineStyleTypes.D.BOLD,actionType:ActionType.INLINE},{inactiveIcon:(0,jsx_runtime.jsx)(FormatItalic.Z,{}),activeIcon:(0,jsx_runtime.jsx)(FormatItalic.Z,{}),type:InlineStyleTypes.D.ITALIC,actionType:ActionType.INLINE},{inactiveIcon:(0,jsx_runtime.jsx)(StrikethroughS.Z,{}),activeIcon:(0,jsx_runtime.jsx)(StrikethroughS.Z,{}),type:InlineStyleTypes.D.STRIKETHROUGH,actionType:ActionType.INLINE}]},{group:GroupTypes.LINK,buttons:[{inactiveIcon:(0,jsx_runtime.jsx)(AddLink.Z,{}),activeIcon:(0,jsx_runtime.jsx)(LinkOff.Z,{}),type:EntityTypes.D.LINK,actionType:ActionType.ENTITY}]},{group:GroupTypes.BLOCK,buttons:[{inactiveIcon:(0,jsx_runtime.jsx)(FormatListBulleted.Z,{}),activeIcon:(0,jsx_runtime.jsx)(FormatListBulleted.Z,{}),type:BlockTypes.P.UL,actionType:ActionType.BLOCK},{inactiveIcon:(0,jsx_runtime.jsx)(FormatListNumbered.Z,{}),activeIcon:(0,jsx_runtime.jsx)(FormatListNumbered.Z,{}),type:BlockTypes.P.OL,actionType:ActionType.BLOCK},{inactiveIcon:(0,jsx_runtime.jsx)(FormatQuote.Z,{}),activeIcon:(0,jsx_runtime.jsx)(FormatQuote.Z,{}),type:BlockTypes.P.BLOCKQUOTE,actionType:ActionType.BLOCK}]}],urlRegexp=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),InlineToolbar=function InlineToolbar(_ref){var _ref$onToggle=_ref.onToggle,onToggle=void 0===_ref$onToggle?function(){}:_ref$onToggle,_ref$selection=_ref.selection,selection=void 0===_ref$selection?[]:_ref$selection,_ref$allowTypes=_ref.allowTypes,allowTypes=void 0===_ref$allowTypes?[]:_ref$allowTypes,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isOpenLink=_useState2[0],setOpenLink=_useState2[1],_useState3=(0,react.useState)(""),_useState4=(0,slicedToArray.Z)(_useState3,2),linkUrl=_useState4[0],setLinkUrl=_useState4[1],_React$useState=react.useState(null),_React$useState2=(0,slicedToArray.Z)(_React$useState,2),headingAnchorEl=_React$useState2[0],setHeadingAnchorEl=_React$useState2[1],isOpenHeading=Boolean(headingAnchorEl),isValidLintUrl=(0,react.useMemo)((function(){return linkUrl.length<2083&&urlRegexp.test(linkUrl)}),[linkUrl]),handleShowHeading=(0,react.useCallback)((function(event){setHeadingAnchorEl(event.currentTarget)}),[]),handleCloseHeading=(0,react.useCallback)((function(){setHeadingAnchorEl(null)}),[]),renderLink=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(Box_Box.Z,{sx:{display:"flex",m:1},children:[(0,jsx_runtime.jsx)(IconButton.Z,{size:"small",sx:{mr:1},onClick:function onClick(){setOpenLink(!1)},children:(0,jsx_runtime.jsx)(ArrowBack.Z,{})}),(0,jsx_runtime.jsx)(TextField.Z,{fullWidth:!0,placeholder:"Введите адрес ссылки",size:"small",sx:{mr:1},autoFocus:!0,error:linkUrl.length>0&&!isValidLintUrl,onChange:function onChange(e){setLinkUrl(e.target.value)},onKeyPress:function onKeyPress(e){"Enter"===e.code&&(onToggle({actionType:ActionType.ENTITY,type:EntityTypes.D.LINK,data:{url:linkUrl}}),setOpenLink(!1))}}),(0,jsx_runtime.jsx)(IconButton.Z,{size:"small",disabled:!isValidLintUrl,onClick:function onClick(){onToggle({actionType:ActionType.ENTITY,type:EntityTypes.D.LINK,data:{url:linkUrl}}),setOpenLink(!1)},children:(0,jsx_runtime.jsx)(AddCircle.Z,{})})]})}),[isValidLintUrl,linkUrl,onToggle]),renderButtons=(0,react.useMemo)((function(){return configButtons.reduce((function(result,item){switch(item.group){case GroupTypes.HEADING:var menuItems=item.buttons.map((function(button){return allowTypes.length>0&&!allowTypes.includes(button.type)?null:(0,jsx_runtime.jsx)(MenuItem.Z,{selected:null==selection?void 0:selection.includes(button.type),onClick:function onClick(){onToggle({actionType:button.actionType,type:button.type}),handleCloseHeading()},children:selection.includes(button.type)?button.activeIcon:button.inactiveIcon},button.type)})).filter(Boolean);if(0===menuItems.length)break;var isActive=item.buttons.some((function(button){return null==selection?void 0:selection.includes(button.type)}));result.push([(0,jsx_runtime.jsx)(IconButton.Z,{id:"heading-positioned-button",color:isActive?"primary":"default","aria-controls":isOpenHeading?"heading-positioned-menu":void 0,"aria-haspopup":"true","aria-expanded":isOpenHeading?"true":void 0,size:"small",sx:{p:0},onClick:handleShowHeading,children:(0,jsx_runtime.jsx)(TextFields.Z,{})},"heading-button-key"),(0,jsx_runtime.jsx)(Menu.Z,{id:"heading-positioned-menu","aria-labelledby":"heading-positioned-button",anchorEl:headingAnchorEl,open:isOpenHeading,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:handleCloseHeading,children:menuItems},"heading-menu-key")]);break;default:result.push(item.buttons.map((function(_ref2,elementIndex){var inactiveIcon=_ref2.inactiveIcon,activeIcon=_ref2.activeIcon,type=_ref2.type,actionType=_ref2.actionType,elementKey="element_".concat(elementIndex),isActive=selection.includes(type);return allowTypes.length>0&&!allowTypes.includes(type)?null:(0,jsx_runtime.jsx)(IconButton.Z,{size:"small",sx:{p:0},color:isActive?"primary":"default",onClick:function onClick(){item.group===GroupTypes.LINK?isActive?onToggle({actionType,type}):setOpenLink(!0):onToggle({actionType,type})},children:isActive?activeIcon:inactiveIcon},elementKey)})).filter(Boolean))}return result}),[])}),[allowTypes,handleCloseHeading,handleShowHeading,headingAnchorEl,isOpenHeading,onToggle,selection]);return(0,jsx_runtime.jsx)(Box_Box.Z,{sx:{width:"fit-content",bgcolor:"background.paper",border:function border(theme){return"1px solid ".concat(theme.palette.divider)},borderRadius:1},children:isOpenLink?renderLink:(0,jsx_runtime.jsx)(Box_Box.Z,{sx:{display:"flex",color:"text.secondary","& svg":{m:1.5},"& hr":{mx:.5}},children:renderButtons.map((function(buttons,buttonsIndex){var groupKey="group_".concat(buttonsIndex);return(0,jsx_runtime.jsxs)(react.Fragment,{children:[buttons,buttons.length>0&&buttonsIndex+1<renderButtons.length&&(0,jsx_runtime.jsx)(Divider.Z,{orientation:"vertical",variant:"middle",flexItem:!0})]},groupKey)}))})})};const InlineToolbar_InlineToolbar=(0,react.memo)(InlineToolbar);try{InlineToolbar.displayName="InlineToolbar",InlineToolbar.__docgenInfo={description:"",displayName:"InlineToolbar",props:{onToggle:{defaultValue:{value:"() => {}"},description:"",name:"onToggle",required:!1,type:{name:"((props: OnTogglePropsType) => void)"}},allowTypes:{defaultValue:{value:"[]"},description:"",name:"allowTypes",required:!1,type:{name:"AllowTypes"}},selection:{defaultValue:{value:"[]"},description:"",name:"selection",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InlineToolbar/InlineToolbar.tsx#InlineToolbar"]={docgenInfo:InlineToolbar.__docgenInfo,name:"InlineToolbar",path:"src/components/InlineToolbar/InlineToolbar.tsx#InlineToolbar"})}catch(__react_docgen_typescript_loader_error){}var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),getSelection=function getSelection(root){return root.getSelection?root.getSelection():root.document.getSelection?root.document.getSelection():null},getSelectionEntityType=function getSelectionEntityType(editorState){var selectionEntity=function getSelectionEntity(editorState){var selectionEntityKey=(0,draftjs_utils.getSelectionEntity)(editorState);return selectionEntityKey?editorState.getCurrentContent().getEntity(selectionEntityKey):null}(editorState);return selectionEntity?selectionEntity.getType():""},MutabilityTypes=__webpack_require__("./src/constants/MutabilityTypes.ts"),useInlineToolbar=function useInlineToolbar(_ref){var render=_ref.render,isReadOnly=_ref.isReadOnly,editorState=_ref.editorState,setEditorState=_ref.setEditorState,setEditorFocus=_ref.setEditorFocus,_ref$allowTypes=_ref.allowTypes,allowTypes=void 0===_ref$allowTypes?[]:_ref$allowTypes,blockKeys=_ref.blockKeys,toolbarRef=(0,react.useRef)(null),position=function usePosition(editorState,toolbarRef){var _useState=(0,react.useState)({left:0,top:0}),_useState2=(0,slicedToArray.Z)(_useState,2),position=_useState2[0],setPosition=_useState2[1];return(0,react.useEffect)((function(){var nativeSelection=getSelection(window);if(null!=nativeSelection&&nativeSelection.rangeCount&&(null==nativeSelection||!nativeSelection.isCollapsed)){var toolbarNode=toolbarRef.current,parentNode=null==toolbarNode?void 0:toolbarNode.parentNode,editorRootNode=null==toolbarNode?void 0:toolbarNode.closest(".".concat("Editor-root"));if(toolbarNode&&parentNode){var selectionBoundary=(0,Draft.getVisibleSelectionRect)(window),parentBoundary=parentNode.getBoundingClientRect(),rootBoundary=editorRootNode.getBoundingClientRect(),top=parentNode.offsetTop-toolbarNode.offsetHeight+(selectionBoundary.top-parentBoundary.top);setPosition({top,left:function left(){var realLeft=selectionBoundary.left+selectionBoundary.width/2-rootBoundary.left-toolbarNode.offsetWidth/2;return realLeft<0?0:realLeft+toolbarNode.offsetWidth>parentBoundary.right?parentBoundary.right-toolbarNode.offsetWidth:realLeft}()})}}}),[editorState,toolbarRef]),position}(editorState,toolbarRef);(0,react.useEffect)((function(){toolbarRef.current&&(toolbarRef.current.style.transition=".2s all",toolbarRef.current.style.position="absolute",toolbarRef.current.style.zIndex="1",toolbarRef.current.style.left="".concat(position.left,"px"),toolbarRef.current.style.top="".concat(position.top,"px"))}),[toolbarRef,position]);var isVisible=(0,react.useMemo)((function(){return!editorState.getSelection().isCollapsed()&&!function isCustomBlockType(editorState,blocks){var blockType=getBlockType(editorState);return blocks.includes(blockType)}(editorState,blockKeys)}),[blockKeys,editorState]),activeSelection=(0,react.useMemo)((function(){return[getSelectionEntityType(editorState),(0,draftjs_utils.getSelectedBlocksType)(editorState)].concat((0,toConsumableArray.Z)(function getSelectionInlineStylesType(editorState){var selectionInlineStyle=(0,draftjs_utils.getSelectionInlineStyle)(editorState);return Object.keys(selectionInlineStyle).filter((function(item){return selectionInlineStyle[item]}))}(editorState))).filter(Boolean)}),[editorState]),handleChange=(0,react.useCallback)((function(_ref2){var actionType=_ref2.actionType,type=_ref2.type,_ref2$data=_ref2.data,url=(_ref2$data=void 0===_ref2$data?{url:""}:_ref2$data).url;switch(actionType){case ActionType.INLINE:setEditorState(Draft.RichUtils.toggleInlineStyle(editorState,type));break;case ActionType.BLOCK:setEditorState(Draft.RichUtils.toggleBlockType(editorState,type));break;case ActionType.ENTITY:type===EntityTypes.D.LINK&&setEditorState(function toggleEntityLink(editorState,url){if(!url)return Draft.RichUtils.toggleLink(editorState,editorState.getSelection(),null);var contentStateWithEntity=editorState.getCurrentContent().createEntity(EntityTypes.D.LINK,MutabilityTypes.m.MUTABLE,{url}),entityKey=contentStateWithEntity.getLastCreatedEntityKey(),newEditorState=Draft.EditorState.set(editorState,{currentContent:contentStateWithEntity});return Draft.RichUtils.toggleLink(newEditorState,newEditorState.getSelection(),entityKey)}(editorState,url))}setEditorFocus()}),[setEditorFocus,setEditorState,editorState]),renderContent=(0,react.useMemo)((function(){return render&&render({selection:activeSelection,onToggle:handleChange,allowTypes})}),[render,activeSelection,handleChange,allowTypes]);return(0,jsx_runtime.jsx)("div",{ref:toolbarRef,hidden:!isVisible||isReadOnly,children:renderContent})};try{useInlineToolbar.displayName="useInlineToolbar",useInlineToolbar.__docgenInfo={description:"",displayName:"useInlineToolbar",props:{editorRef:{defaultValue:null,description:"",name:"editorRef",required:!0,type:{name:"RefObject<DraftEditor>"}},blockKeys:{defaultValue:null,description:"",name:"blockKeys",required:!0,type:{name:"string[]"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},editorState:{defaultValue:null,description:"",name:"editorState",required:!0,type:{name:"EditorState"}},setEditorState:{defaultValue:null,description:"",name:"setEditorState",required:!0,type:{name:"(state: EditorState) => void"}},setEditorFocus:{defaultValue:null,description:"",name:"setEditorFocus",required:!0,type:{name:"() => void"}},allowTypes:{defaultValue:{value:"[]"},description:"",name:"allowTypes",required:!1,type:{name:"AllowTypes"}},render:{defaultValue:null,description:"",name:"render",required:!0,type:{name:"RenderFnType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/InlineToolbar/hooks/useInlineToolbar/useInlineToolbar.tsx#useInlineToolbar"]={docgenInfo:useInlineToolbar.__docgenInfo,name:"useInlineToolbar",path:"src/components/InlineToolbar/hooks/useInlineToolbar/useInlineToolbar.tsx#useInlineToolbar"})}catch(__react_docgen_typescript_loader_error){}var react_outside_click_handler=__webpack_require__("./node_modules/react-outside-click-handler/index.js"),AddCircleOutline=__webpack_require__("./node_modules/@mui/icons-material/AddCircleOutline.js"),Tooltip=__webpack_require__("./node_modules/@mui/material/Tooltip/Tooltip.js");const Modal_context=(0,react.createContext)({setModal:function setModal(){},show:function show(){},hide:function hide(){}});var Provider=function Provider(_ref){var children=_ref.children,modals=(0,react.useMemo)((function(){return{}}),[]),_useState=(0,react.useState)(),_useState2=(0,slicedToArray.Z)(_useState,2),activeModal=_useState2[0],setActiveModal=_useState2[1],onHide=(0,react.useCallback)((function(key){setActiveModal(modals[key]({isOpen:!1,onClose:function onClose(){return onHide(key)},data:{}}))}),[modals]),onShow=(0,react.useCallback)((function(key,data){setActiveModal(modals[key]({isOpen:!0,onClose:function onClose(){return onHide(key)},data}))}),[onHide,modals]),setModal=(0,react.useCallback)((function(key,render){modals[key]=render}),[modals]),contextValue=(0,react.useMemo)((function(){return{setModal,show:onShow,hide:onHide}}),[onHide,onShow,setModal]);return(0,jsx_runtime.jsx)(Modal_context.Provider,{value:contextValue,children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[children,activeModal]})})};const Modal_Provider=Provider;try{Provider.displayName="Provider",Provider.__docgenInfo={description:"",displayName:"Provider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal/Provider.tsx#Provider"]={docgenInfo:Provider.__docgenInfo,name:"Provider",path:"src/components/Modal/Provider.tsx#Provider"})}catch(__react_docgen_typescript_loader_error){}var Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),DialogTitle=__webpack_require__("./node_modules/@mui/material/DialogTitle/DialogTitle.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/useMediaQuery.js"),useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),Modal_Modal=function Modal(_ref){var children=_ref.children,isOpen=_ref.isOpen,title=_ref.title,onOutsideClick=_ref.onOutsideClick,theme=(0,useTheme.Z)(),fullScreen=(0,useMediaQuery.Z)(theme.breakpoints.down("md"));return(0,jsx_runtime.jsxs)(Dialog.Z,{fullScreen,open:isOpen,"aria-labelledby":"responsive-dialog-title",onClose:onOutsideClick,children:[(0,jsx_runtime.jsx)(DialogTitle.Z,{id:"responsive-dialog-title",children:title}),(0,jsx_runtime.jsx)(DialogContent.Z,{children})]})};const components_Modal_Modal=(0,react.memo)(Modal_Modal);try{Modal_Modal.displayName="Modal",Modal_Modal.__docgenInfo={description:"",displayName:"Modal",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onOutsideClick:{defaultValue:null,description:"",name:"onOutsideClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal/Modal.tsx#Modal"]={docgenInfo:Modal_Modal.__docgenInfo,name:"Modal",path:"src/components/Modal/Modal.tsx#Modal"})}catch(__react_docgen_typescript_loader_error){}function useModal_useModal(render){var context=(0,react.useContext)(Modal_context),modalKey=(0,react.useMemo)((function(){return Math.random().toString(36)}),[]),showModal=(0,react.useCallback)((function(data){context.show(modalKey,data)}),[modalKey,context]),hideModal=(0,react.useCallback)((function(){context.hide(modalKey)}),[context,modalKey]);return(0,react.useEffect)((function(){context.setModal(modalKey,render)}),[context,render,modalKey]),[showModal,hideModal]}const hooks_useModal=useModal_useModal;try{useModal_useModal.displayName="useModal",useModal_useModal.__docgenInfo={description:"",displayName:"useModal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal/hooks/useModal.tsx#useModal"]={docgenInfo:useModal_useModal.__docgenInfo,name:"useModal",path:"src/components/Modal/hooks/useModal.tsx#useModal"})}catch(__react_docgen_typescript_loader_error){}function useConfirm(_ref){var _ref$title=_ref.title,title=void 0===_ref$title?"Вы уверены?":_ref$title,_ref$onConfirm=_ref.onConfirm,onConfirm=void 0===_ref$onConfirm?function(){}:_ref$onConfirm;return useModal((function(_ref2){var isOpen=_ref2.isOpen,onClose=_ref2.onClose,data=_ref2.data;return _jsx(Modal,{title,isOpen,onOutsideClick:onClose,children:_jsxs(Box,{sx:{mt:2},textAlign:"right",children:[_jsx(Button,{variant:"outlined",onClick:onClose,children:"Отмена"}),"  ",_jsx(Button,{variant:"contained",onClick:function onClick(){onConfirm(data),onClose()},children:"Ок"})]})})}))}try{useConfirm.displayName="useConfirm",useConfirm.__docgenInfo={description:"",displayName:"useConfirm",props:{title:{defaultValue:{value:"Вы уверены?"},description:"",name:"title",required:!1,type:{name:"string"}},onConfirm:{defaultValue:{value:"() => {}"},description:"",name:"onConfirm",required:!1,type:{name:"(data: DataType) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal/hooks/useConfirm.tsx#useConfirm"]={docgenInfo:useConfirm.__docgenInfo,name:"useConfirm",path:"src/components/Modal/hooks/useConfirm.tsx#useConfirm"})}catch(__react_docgen_typescript_loader_error){}try{useAlert.displayName="useAlert",useAlert.__docgenInfo={description:"",displayName:"useAlert",props:{title:{defaultValue:{value:""},description:"",name:"title",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal/hooks/useAlert.tsx#useAlert"]={docgenInfo:useAlert.__docgenInfo,name:"useAlert",path:"src/components/Modal/hooks/useAlert.tsx#useAlert"})}catch(__react_docgen_typescript_loader_error){}var BlockToolbar=function BlockToolbar(_ref){var onAdd=_ref.onAdd,blocks=_ref.blocks,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),isOpenToolbar=_useState2[0],setOpenToolbar=_useState2[1],_useModal=hooks_useModal((function(_ref2){var isOpen=_ref2.isOpen,onClose=_ref2.onClose,data=_ref2.data;return(0,jsx_runtime.jsx)(components_Modal_Modal,{isOpen,title:data.label,onOutsideClick:onClose,children:null!=data&&data.setupElement?data.setupElement({onCreate:function onCreate(blockData){onAdd({type:data.type,data:blockData}),onClose()},data:{}}):null})})),showModal=(0,slicedToArray.Z)(_useModal,1)[0],renderButtons=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Divider.Z,{orientation:"vertical",variant:"middle",flexItem:!0}),blocks.map((function(block){return(0,jsx_runtime.jsx)(Tooltip.Z,{title:block.label,children:(0,jsx_runtime.jsx)(IconButton.Z,{size:"large",onClick:function onClick(){null!=block&&block.setupElement?showModal((0,objectSpread2.Z)({},block)):onAdd({type:block.type,data:{}})},children:block.toolbarIcon},block.type)},block.type)}))]})}),[blocks,onAdd,showModal]);return(0,jsx_runtime.jsx)(react_outside_click_handler.default,{onOutsideClick:function onOutsideClick(){setOpenToolbar(!1)},children:(0,jsx_runtime.jsxs)(Box_Box.Z,{sx:{display:"flex",bgcolor:"background.paper",border:function border(theme){return"1px solid ".concat(theme.palette.divider)},borderRadius:1},children:[(0,jsx_runtime.jsx)(IconButton.Z,{size:"large",onClick:function onClick(){setOpenToolbar(!isOpenToolbar)},children:(0,jsx_runtime.jsx)(AddCircleOutline.Z,{})}),isOpenToolbar&&renderButtons]})})};const BlockToolbar_BlockToolbar=(0,react.memo)(BlockToolbar);try{BlockToolbar.displayName="BlockToolbar",BlockToolbar.__docgenInfo={description:"",displayName:"BlockToolbar",props:{onAdd:{defaultValue:null,description:"",name:"onAdd",required:!0,type:{name:"(props: { type: string; data?: Record<string, unknown> | undefined; }) => void"}},blocks:{defaultValue:null,description:"",name:"blocks",required:!0,type:{name:"BlockConfigType[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BlockToolbar/BlockToolbar.tsx#BlockToolbar"]={docgenInfo:BlockToolbar.__docgenInfo,name:"BlockToolbar",path:"src/components/BlockToolbar/BlockToolbar.tsx#BlockToolbar"})}catch(__react_docgen_typescript_loader_error){}const useControl_useControl=function useControl(editorState,isReadOnly){var targetRef=(0,react.useRef)(),parentTargetRef=(0,react.useRef)(),_useState=(0,react.useState)(0),_useState2=(0,slicedToArray.Z)(_useState,2),topPosition=_useState2[0],setTopPosition=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),isVisible=_useState4[0],setVisible=_useState4[1],setTop=(0,react.useCallback)((function(){var _targetRef$current;if(targetRef.current=function getSelectedBlockNode(root){var _selection$getRangeAt,selection=getSelection(root);if(null==selection||!selection.anchorNode)return null;var node=null==selection||null===(_selection$getRangeAt=selection.getRangeAt(0))||void 0===_selection$getRangeAt?void 0:_selection$getRangeAt.startContainer;return null!=node&&node.closest?node.closest("[data-block=true]"):null}(window),parentTargetRef.current=null===(_targetRef$current=targetRef.current)||void 0===_targetRef$current?void 0:_targetRef$current.closest(".DraftEditor-root"),targetRef.current&&parentTargetRef.current){var targetBoundingRect=targetRef.current.getBoundingClientRect(),parentTargetBoundingRect=parentTargetRef.current.getBoundingClientRect(),top=targetBoundingRect.top-parentTargetBoundingRect.top-13;setTopPosition(top)}}),[]);return(0,react.useEffect)((function(){var selectionState=editorState.getSelection(),anchorKey=selectionState.getAnchorKey(),blockForKey=editorState.getCurrentContent().getBlockForKey(anchorKey),blockType=(0,draftjs_utils.getSelectedBlocksType)(editorState);isReadOnly||!selectionState.isCollapsed()||anchorKey!==selectionState.getFocusKey()||blockForKey.getLength()>0||blockType!==BlockTypes.P.UNSTYLED?isVisible&&setVisible(!1):(isVisible||setVisible(!0),setTop())}),[editorState,isVisible,isReadOnly,setTop]),(0,react.useMemo)((function(){return{isVisible,position:{top:topPosition,left:0}}}),[isVisible,topPosition])};var useBlockToolbar=function useBlockToolbar(_ref){var editorRef=_ref.editorRef,render=_ref.render,isReadOnly=_ref.isReadOnly,editorState=_ref.editorState,setEditorState=_ref.setEditorState,setEditorFocus=_ref.setEditorFocus,blockRenderMap=_ref.blockRenderMap,toolbarRef=(0,react.useRef)(null),_useControl=useControl_useControl(editorState,isReadOnly,editorRef),position=_useControl.position,isVisible=_useControl.isVisible;(0,react.useEffect)((function(){toolbarRef.current&&(toolbarRef.current.style.transition=".2s all",toolbarRef.current.style.position="absolute",toolbarRef.current.style.zIndex="1",toolbarRef.current.style.left="".concat(position.left,"px"),toolbarRef.current.style.top="".concat(position.top,"px"))}),[toolbarRef,position]);var handleChange=(0,react.useCallback)((function(_ref2){var type=_ref2.type,data=_ref2.data;setEditorState(function addNewBlock(editorState){var newType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BlockTypes.P.UNSTYLED,initialData=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},selectionState=editorState.getSelection();if(!selectionState.isCollapsed())return editorState;var contentState=editorState.getCurrentContent(),currentBlock=getCurrentBlock(editorState);if(!currentBlock)return editorState;if(0===currentBlock.getLength()){if(currentBlock.getType()===newType)return editorState;var newBlock=currentBlock.merge({type:newType,data:initialData}),key=selectionState.getStartKey(),blockMap=contentState.getBlockMap(),newContentState=contentState.merge({blockMap:blockMap.set(key,new Draft.ContentBlock(newBlock)),selectionAfter:selectionState}),newState=Draft.EditorState.push(editorState,new Draft.ContentState(newContentState),ChangeTypes_ChangeTypes.CHANGE_BLOCK_TYPE);return(0,draftjs_utils.insertNewUnstyledBlock)(newState)}return editorState}(editorState,type,data)),setEditorFocus()}),[editorState,setEditorState,setEditorFocus]),renderBlock=(0,react.useMemo)((function(){return render({onAdd:handleChange,blocks:Object.keys(blockRenderMap).map((function(blockType){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},blockRenderMap[blockType]),{},{type:blockType})}))})}),[render,handleChange,blockRenderMap]);return(0,jsx_runtime.jsx)("div",{ref:toolbarRef,hidden:!isVisible||isReadOnly,children:renderBlock})};try{useBlockToolbar.displayName="useBlockToolbar",useBlockToolbar.__docgenInfo={description:"",displayName:"useBlockToolbar",props:{editorRef:{defaultValue:null,description:"",name:"editorRef",required:!0,type:{name:"RefObject<DraftEditor>"}},isReadOnly:{defaultValue:null,description:"",name:"isReadOnly",required:!0,type:{name:"boolean"}},editorState:{defaultValue:null,description:"",name:"editorState",required:!0,type:{name:"EditorState"}},setEditorState:{defaultValue:null,description:"",name:"setEditorState",required:!0,type:{name:"(state: EditorState) => void"}},setEditorFocus:{defaultValue:null,description:"",name:"setEditorFocus",required:!0,type:{name:"() => void"}},blockRenderMap:{defaultValue:null,description:"",name:"blockRenderMap",required:!0,type:{name:"BlockRenderMapType"}},render:{defaultValue:null,description:"",name:"render",required:!0,type:{name:"RenderFnType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BlockToolbar/hooks/useBlockToolbar/useBlockToolbar.tsx#useBlockToolbar"]={docgenInfo:useBlockToolbar.__docgenInfo,name:"useBlockToolbar",path:"src/components/BlockToolbar/hooks/useBlockToolbar/useBlockToolbar.tsx#useBlockToolbar"})}catch(__react_docgen_typescript_loader_error){}var DeleteOutline=__webpack_require__("./node_modules/@mui/icons-material/DeleteOutline.js"),Edit=__webpack_require__("./node_modules/@mui/icons-material/Edit.js");const context=(0,react.createContext)({editorState:Draft.EditorState.createEmpty(),setEditorFocus:function setEditorFocus(){},handleChangeState:function handleChangeState(){},setReadOnly:function setReadOnly(){},isReadOnly:!1});const useEditor_useEditor=function useEditor(){var _useContext=(0,react.useContext)(context),handleChangeState=_useContext.handleChangeState,editorState=_useContext.editorState,editorRef=_useContext.editorRef,setReadOnly=_useContext.setReadOnly,isReadOnly=_useContext.isReadOnly;return{setEditorState:handleChangeState,setEditorFocus:_useContext.setEditorFocus,setReadOnly,isReadOnly,editorState,editorRef}};var Container_templateObject,ListItemIcon=__webpack_require__("./node_modules/@mui/material/ListItemIcon/ListItemIcon.js"),ListItemText=__webpack_require__("./node_modules/@mui/material/ListItemText/ListItemText.js"),MoreHoriz=__webpack_require__("./node_modules/@mui/icons-material/MoreHoriz.js"),styled_browser_esm=__webpack_require__("./node_modules/@storybook/theming/node_modules/@emotion/styled/dist/styled.browser.esm.js");const styled_Container=(0,styled_browser_esm.Z)("div")([function Container(){return(0,emotion_react_browser_esm.iv)(Container_templateObject||(Container_templateObject=(0,taggedTemplateLiteral.Z)(["\n  position: relative;\n  width: 100%;\n"])))}]);var MenuContainer_templateObject;const styled_MenuContainer=(0,styled_browser_esm.Z)("div")([function MenuContainer(){return(0,emotion_react_browser_esm.iv)(MenuContainer_templateObject||(MenuContainer_templateObject=(0,taggedTemplateLiteral.Z)(["\n  position: absolute;\n  right: 0;\n  top: 0;\n"])))}]);var BlockOptions=function BlockOptions(_ref){var children=_ref.children,_ref$menuList=_ref.menuList,menuList=void 0===_ref$menuList?[]:_ref$menuList,_useState=(0,react.useState)(null),_useState2=(0,slicedToArray.Z)(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1],open=Boolean(anchorEl),handleClick=(0,react.useCallback)((function(event){setAnchorEl(event.currentTarget)}),[]),handleClose=(0,react.useCallback)((function(){setAnchorEl(null)}),[]);return(0,jsx_runtime.jsxs)(styled_Container,{children:[children,(0,jsx_runtime.jsx)(styled_MenuContainer,{children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Box_Box.Z,{sx:{display:"flex",alignItems:"center",textAlign:"center"},children:(0,jsx_runtime.jsx)(Tooltip.Z,{title:"Настройки",children:(0,jsx_runtime.jsx)(IconButton.Z,{size:"small",sx:{ml:2},"aria-expanded":open?"true":void 0,onClick:handleClick,children:(0,jsx_runtime.jsx)(MoreHoriz.Z,{})})})}),(0,jsx_runtime.jsx)(Menu.Z,{anchorEl,id:"account-menu",open,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},onClose:handleClose,onClick:handleClose,children:menuList.map((function(menuItem){return(0,jsx_runtime.jsxs)(MenuItem.Z,{onClick:menuItem.action,children:[(0,jsx_runtime.jsx)(ListItemIcon.Z,{children:menuItem.icon}),(0,jsx_runtime.jsx)(ListItemText.Z,{children:menuItem.title})]},menuItem.title)}))})]})})]})};const BlockOptions_BlockOptions=(0,react.memo)(BlockOptions);try{BlockOptions.displayName="BlockOptions",BlockOptions.__docgenInfo={description:"",displayName:"BlockOptions",props:{menuList:{defaultValue:{value:"[]"},description:"",name:"menuList",required:!1,type:{name:"MenuType[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/BlockOptions/BlockOptions.tsx#BlockOptions"]={docgenInfo:BlockOptions.__docgenInfo,name:"BlockOptions",path:"src/components/BlockOptions/BlockOptions.tsx#BlockOptions"})}catch(__react_docgen_typescript_loader_error){}var styled_Container_templateObject,_templateObject2,DISABLED_EDITOR_FIELDS=["INPUT","TEXTAREA"],withBlockAdapter=function withBlockAdapter(_ref,_ref2){var label=_ref.label,element=_ref.element,setupElement=_ref.setupElement,isEditable=_ref.isEditable,isActive=_ref2.isActive,Wrapper=function Wrapper(_ref3){var _block$getData,block=_ref3.block,blockData=null==block||null===(_block$getData=block.getData())||void 0===_block$getData?void 0:_block$getData.toJS(),_useEditor=useEditor_useEditor(),editorState=_useEditor.editorState,setReadOnly=_useEditor.setReadOnly,setEditorState=_useEditor.setEditorState,handleRemoveBlock=(0,react.useCallback)((function(){setEditorState(removeBlock(editorState,block))}),[editorState,setEditorState,block]),handleSetBlockData=(0,react.useCallback)((function(data){var newEditorState=function setBlockData(editorState,block,blockData){var newContentState,selection=editorState.getSelection(),currentContent=editorState.getCurrentContent(),blockKey=block.getKey(),updatedSelection=selection.merge({focusKey:blockKey,anchorKey:blockKey,focusOffset:0});return newContentState=blockData?Draft.Modifier.mergeBlockData(currentContent,updatedSelection,blockData):Draft.Modifier.setBlockData(currentContent,updatedSelection,(0,immutable_es.Map)({})),Draft.EditorState.push(editorState,newContentState,ChangeTypes_ChangeTypes.CHANGE_BLOCK_DATA)}(editorState,block,data);setEditorState(newEditorState)}),[block,editorState,setEditorState]),render=(0,react.useMemo)((function(){return element({data:blockData,setData:handleSetBlockData,isReadonly:!isActive})}),[handleSetBlockData,blockData]),handleActivateEditor=(0,react.useCallback)((function(e){DISABLED_EDITOR_FIELDS.includes(e.target.tagName)&&setReadOnly(!1)}),[setReadOnly]),handleDeactivateEditor=(0,react.useCallback)((function(e){DISABLED_EDITOR_FIELDS.includes(e.target.tagName)&&setReadOnly(!0)}),[setReadOnly]),_useModal=hooks_useModal((function(_ref4){var isOpen=_ref4.isOpen,onClose=_ref4.onClose;return(0,jsx_runtime.jsx)(components_Modal_Modal,{isOpen,title:label,onOutsideClick:onClose,children:setupElement?setupElement({onCreate:function onCreate(params){handleSetBlockData(params),onClose()},data:blockData}):null})})),showModal=(0,slicedToArray.Z)(_useModal,1)[0],menuList=(0,react.useMemo)((function(){var menu=[{title:"Удалить",icon:(0,jsx_runtime.jsx)(DeleteOutline.Z,{}),action:handleRemoveBlock}];return isEditable&&setupElement&&menu.push({title:"Изменить",icon:(0,jsx_runtime.jsx)(Edit.Z,{}),action:showModal}),menu}),[handleRemoveBlock,showModal]);return(0,jsx_runtime.jsx)("div",{onFocus:handleDeactivateEditor,onBlur:handleActivateEditor,children:isActive?(0,jsx_runtime.jsx)(BlockOptions_BlockOptions,{menuList,children:render}):render})};return(0,react.memo)(Wrapper)},Default=(0,emotion_react_browser_esm.iv)(styled_Container_templateObject||(styled_Container_templateObject=(0,taggedTemplateLiteral.Z)(["\n  position: relative;\n"])));const Editor_styled_Container=(0,styled_browser_esm.Z)("div")([function Aside(_ref){var _ref$isShowAside=_ref.isShowAside;return void 0===_ref$isShowAside||_ref$isShowAside?(0,emotion_react_browser_esm.iv)(_templateObject2||(_templateObject2=(0,taggedTemplateLiteral.Z)(["\n    padding-left: 60px;\n  "]))):""},Default]);var Placeholder_templateObject;const Placeholder=(0,styled_browser_esm.Z)("div")([function placeholderStyles(_ref){var _ref$isShow=_ref.isShow,isShow=void 0===_ref$isShow||_ref$isShow;return(0,emotion_react_browser_esm.iv)(Placeholder_templateObject||(Placeholder_templateObject=(0,taggedTemplateLiteral.Z)(["\n    & ."," {\n        position: relative;\n    }\n\n    & .","."," {\n        display: none;\n    }\n\n    & ."," {\n        display: ",";\n        position: absolute;\n        pointer-events: none;\n        color: #B4B4B4;\n        top: 50%;\n        transform: translate(5px, -50%);\n    }\n"])),"DraftEditor-root","public-DraftEditorPlaceholder-root","public-DraftEditorPlaceholder-hasFocus","public-DraftEditorPlaceholder-root",isShow?"block":"none")}]);var _defaultStyleBlockRen,defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),_excluded=["children"],_excluded2=["children"],_excluded3=["children"],_excluded4=["children"],_excluded5=["children"],_excluded6=["children"],_excluded7=["children"],_excluded8=["children"],_excluded9=["children"],_excluded10=["children"],defaultStyleBlockRenderMap=(_defaultStyleBlockRen={},(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.UNSTYLED,{element:function element(_ref){var children=_ref.children,other=(0,objectWithoutProperties.Z)(_ref,_excluded);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.H1,{element:function element(_ref2){var children=_ref2.children,other=(0,objectWithoutProperties.Z)(_ref2,_excluded2);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{variant:"h1",component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.H2,{element:function element(_ref3){var children=_ref3.children,other=(0,objectWithoutProperties.Z)(_ref3,_excluded3);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{variant:"h2",component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.H3,{element:function element(_ref4){var children=_ref4.children,other=(0,objectWithoutProperties.Z)(_ref4,_excluded4);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{variant:"h3",component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.H4,{element:function element(_ref5){var children=_ref5.children,other=(0,objectWithoutProperties.Z)(_ref5,_excluded5);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{variant:"h4",component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.H5,{element:function element(_ref6){var children=_ref6.children,other=(0,objectWithoutProperties.Z)(_ref6,_excluded6);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{variant:"h5",component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.H6,{element:function element(_ref7){var children=_ref7.children,other=(0,objectWithoutProperties.Z)(_ref7,_excluded7);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{variant:"h6",component:"div",children}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.BLOCKQUOTE,{element:function element(_ref8){var children=_ref8.children,other=(0,objectWithoutProperties.Z)(_ref8,_excluded8);return(0,jsx_runtime.jsxs)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{component:"blockquote",children:['"',children,'"']}))}}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.UL,{element:function element(_ref9){var children=_ref9.children,other=(0,objectWithoutProperties.Z)(_ref9,_excluded9);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{component:"li",children}))},wrapper:(0,jsx_runtime.jsx)(Typography.Z,{style:{paddingLeft:"18px"},component:"ul"})}),(0,defineProperty.Z)(_defaultStyleBlockRen,BlockTypes.P.OL,{element:function element(_ref10){var children=_ref10.children,other=(0,objectWithoutProperties.Z)(_ref10,_excluded10);return(0,jsx_runtime.jsx)(Typography.Z,(0,objectSpread2.Z)((0,objectSpread2.Z)({},other),{},{component:"li",children}))},wrapper:(0,jsx_runtime.jsx)(Typography.Z,{style:{paddingLeft:"18px"},component:"ol"})}),_defaultStyleBlockRen),Link=__webpack_require__("./node_modules/@mui/material/Link/Link.js"),Component=function Component(_ref){var children=_ref.children,contentState=_ref.contentState,entityKey=_ref.entityKey,url=contentState.getEntity(entityKey).getData().url;return(0,jsx_runtime.jsx)(Link.Z,{href:url,title:url,children})};const decorators_link={strategy:function strategy(contentBlock,callback,contentState){contentBlock.findEntityRanges((function(character){var entityKey=character.getEntity();return!!entityKey&&contentState.getEntity(entityKey).getType()===EntityTypes.D.LINK}),callback)},component:Component};try{Component.displayName="Component",Component.__docgenInfo={description:"",displayName:"Component",props:{contentState:{defaultValue:null,description:"",name:"contentState",required:!0,type:{name:"ContentState"}},entityKey:{defaultValue:null,description:"",name:"entityKey",required:!0,type:{name:"string"}},decoratedText:{defaultValue:null,description:"",name:"decoratedText",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Editor/decorators/link.tsx#Component"]={docgenInfo:Component.__docgenInfo,name:"Component",path:"src/components/Editor/decorators/link.tsx#Component"})}catch(__react_docgen_typescript_loader_error){}const decorators=new Draft.CompositeDecorator([decorators_link]);var Editor=function Editor(_ref){var _ref$isActive=_ref.isActive,isActive=void 0===_ref$isActive||_ref$isActive,_ref$isAutoFocus=_ref.isAutoFocus,isAutoFocus=void 0!==_ref$isAutoFocus&&_ref$isAutoFocus,_ref$state=_ref.state,state=void 0===_ref$state?{blocks:[],entityMap:{}}:_ref$state,_ref$stateType=_ref.stateType,stateType=void 0===_ref$stateType?StateTypes.n.MARKDOWN:_ref$stateType,_ref$styleBlockRender=_ref.styleBlockRenderMap,styleBlockRenderMap=void 0===_ref$styleBlockRender?{}:_ref$styleBlockRender,_ref$blockRenderMap=_ref.blockRenderMap,blockRenderMap=void 0===_ref$blockRenderMap?{}:_ref$blockRenderMap,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?function(){}:_ref$onChange,_ref$renderInlineTool=_ref.renderInlineToolbar,renderInlineToolbar=void 0===_ref$renderInlineTool?function(_ref2){var selection=_ref2.selection,allowTypes=_ref2.allowTypes,onToggle=_ref2.onToggle;return(0,jsx_runtime.jsx)(InlineToolbar_InlineToolbar,{selection,allowTypes,onToggle})}:_ref$renderInlineTool,_ref$renderBlockToolb=_ref.renderBlockToolbar,renderBlockToolbar=void 0===_ref$renderBlockToolb?function(_ref3){var blocks=_ref3.blocks,onAdd=_ref3.onAdd;return(0,jsx_runtime.jsx)(BlockToolbar_BlockToolbar,{blocks,onAdd})}:_ref$renderBlockToolb,_ref$inlineToolbarAll=_ref.inlineToolbarAllowTypes,inlineToolbarAllowTypes=void 0===_ref$inlineToolbarAll?[]:_ref$inlineToolbarAll,editorRef=(0,react.useRef)(null),_useState=(0,react.useState)(!isActive),_useState2=(0,slicedToArray.Z)(_useState,2),isReadOnly=_useState2[0],setReadOnly=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),hasBlock=_useState4[0],setHasBlock=_useState4[1],_useState5=(0,react.useState)((function(){var _Object$keys;return null===(_Object$keys=Object.keys(blockRenderMap))||void 0===_Object$keys?void 0:_Object$keys.map((function(blockType){return{type:blockType,component:withBlockAdapter(blockRenderMap[blockType],{isActive}),editable:!1}}))})),customBlocks=(0,slicedToArray.Z)(_useState5,1)[0],blockKeys=(0,react.useMemo)((function(){return Object.keys(blockRenderMap)}),[blockRenderMap]),_useState7=(0,react.useState)((function(){var contentState=(0,Draft.convertFromRaw)(state);return Draft.EditorState.createWithContent(contentState,decorators)})),_useState8=(0,slicedToArray.Z)(_useState7,2),editorState=_useState8[0],setEditorState=_useState8[1],blockRenderer=(0,react.useCallback)((function(block){return customBlocks.find((function(customBlock){return customBlock.type===block.getType()}))}),[customBlocks]),toggleHasBlock=(0,react.useCallback)((function(newEditorState){var currentBlockType=getBlockType(newEditorState);setHasBlock(currentBlockType!==BlockTypes.P.UNSTYLED)}),[setHasBlock]),handleChangeState=(0,react.useCallback)((function(newEditorState){if(toggleHasBlock(newEditorState),setEditorState(newEditorState),onChange){var content=newEditorState.getCurrentContent();onChange((0,Draft.convertToRaw)(content))}}),[onChange,toggleHasBlock]),handlePastedText=(0,react.useCallback)((function(text){var textState=Draft.ContentState.createFromText(text),newState=Draft.Modifier.replaceWithFragment(editorState.getCurrentContent(),editorState.getSelection(),textState.getBlockMap()),newEditorState=Draft.EditorState.push(editorState,newState,ChangeTypes_ChangeTypes.INSERT_FRAGMENT);return handleChangeState(newEditorState),HandledTypes.HANDLED}),[editorState,handleChangeState]),handleKeyCommand=(0,react.useCallback)((function(command){var currentBlock=getCurrentBlock(editorState);if(command===KeyCommands_DELETE){var nextBlock=function getNextBlock(editorState){var blockMap=editorState.getCurrentContent().getBlockMap(),blockKey=getCurrentBlock(editorState).getKey(),index=blockMap.keySeq().findIndex((function(k){return k===blockKey}));return blockMap.toList().get(index+1)}(editorState),endOffset=editorState.getSelection().getEndOffset();if(currentBlock.getLength()===endOffset&&blockKeys.includes(null==nextBlock?void 0:nextBlock.getType()))return handleChangeState(removeBlock(editorState,nextBlock)),HandledTypes.HANDLED}if(command===KeyCommands_BACKSPACE&&currentBlock.getType()===BlockTypes.P.UNSTYLED){var prevBlock=function getPrevBlock(editorState){var blockMap=editorState.getCurrentContent().getBlockMap(),blockKey=getCurrentBlock(editorState).getKey(),index=blockMap.keySeq().findIndex((function(k){return k===blockKey}));return blockMap.toList().get(index-1)}(editorState),startOffset=editorState.getSelection().getStartOffset();if((0===currentBlock.getLength()||0===startOffset)&&prevBlock&&blockKeys.includes(null==prevBlock?void 0:prevBlock.getType()))return handleChangeState(removeBlock(editorState,prevBlock)),HandledTypes.HANDLED}var newState=Draft.RichUtils.handleKeyCommand(editorState,command);return newState?(handleChangeState(newState),HandledTypes.HANDLED):HandledTypes.NOT_HANDLED}),[blockKeys,editorState,handleChangeState]),handleReturn=(0,react.useCallback)((function(e){if(Draft.KeyBindingUtil.isSoftNewlineEvent(e))return handleChangeState(Draft.RichUtils.insertSoftNewline(editorState)),HandledTypes.HANDLED;var currentBlock=getCurrentBlock(editorState),blockType=currentBlock.getType();if(!e.altKey&&!e.metaKey&&!e.ctrlKey){if(0!==currentBlock.getLength()){var selection=editorState.getSelection(),continuousBlocks=[BlockTypes.P.BLOCKQUOTE,BlockTypes.P.H1,BlockTypes.P.H2,BlockTypes.P.H3,BlockTypes.P.H4,BlockTypes.P.H5,BlockTypes.P.H6];return selection.isCollapsed()&&currentBlock.getLength()===selection.getStartOffset()&&continuousBlocks.includes(blockType)?(handleChangeState(function addNewBlockAt(editorState,pivotBlockKey){var newBlockType=arguments.length>2&&void 0!==arguments[2]?arguments[2]:BlockTypes.P.UNSTYLED,initialData=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},content=editorState.getCurrentContent(),blockMap=content.getBlockMap(),block=blockMap.get(pivotBlockKey);if(!block)throw new Error("The pivot key - ".concat(pivotBlockKey," is not present in blockMap."));var blocksBefore=blockMap.toSeq().takeUntil((function(v){return v===block})),blocksAfter=blockMap.toSeq().skipUntil((function(v){return v===block})).rest(),newBlockKey=(0,Draft.genKey)(),newBlock=new Draft.ContentBlock({key:newBlockKey,type:newBlockType,text:"",characterList:(0,immutable_es.List)(),depth:0,data:(0,immutable_es.Map)(initialData)}),newBlockMap=blocksBefore.concat([[pivotBlockKey,block],[newBlockKey,newBlock]],blocksAfter).toOrderedMap(),selection=editorState.getSelection(),newContentState=content.merge({blockMap:newBlockMap,selectionBefore:selection,selectionAfter:selection.merge({anchorKey:newBlockKey,anchorOffset:0,focusKey:newBlockKey,focusOffset:0,isBackward:!1})});return Draft.EditorState.push(editorState,new Draft.ContentState(newContentState),"split-block")}(editorState,currentBlock.getKey())),HandledTypes.HANDLED):HandledTypes.NOT_HANDLED}switch(blockType){case BlockTypes.P.UL:case BlockTypes.P.OL:case BlockTypes.P.BLOCKQUOTE:case BlockTypes.P.H1:case BlockTypes.P.H2:case BlockTypes.P.H3:case BlockTypes.P.H4:case BlockTypes.P.H5:case BlockTypes.P.H6:return handleChangeState(resetBlockWithType(editorState,BlockTypes.P.UNSTYLED)),HandledTypes.HANDLED;default:return HandledTypes.NOT_HANDLED}}return HandledTypes.NOT_HANDLED}),[editorState,handleChangeState]),handleBeforeInput=(0,react.useCallback)((function(){var _exec$groups,_exec$groups2,block=getCurrentBlock(editorState),blockType=block.getType();if(blockType!==BlockTypes.P.UNSTYLED)return HandledTypes.NOT_HANDLED;var exec=(0,wrapRegExp.Z)(/^([ #\*\x2D\.0-9=>]{0,6})([\s\S]*)/,{key:1,text:2}).exec(block.getText()),stringToTypeMapKey=null==exec||null===(_exec$groups=exec.groups)||void 0===_exec$groups?void 0:_exec$groups.key,blockTo=ShortcutKeys[stringToTypeMapKey];if(!blockTo||blockType!==BlockTypes.P.UNSTYLED)return HandledTypes.NOT_HANDLED;var newEditorState=resetBlockWithType(editorState,blockTo,{text:null==exec||null===(_exec$groups2=exec.groups)||void 0===_exec$groups2?void 0:_exec$groups2.text});return handleChangeState(newEditorState),HandledTypes.HANDLED}),[editorState,handleChangeState]),setEditorFocus=(0,react.useCallback)((function(){null!=editorRef&&editorRef.current&&setTimeout((function(){var _editorRef$current;null==editorRef||null===(_editorRef$current=editorRef.current)||void 0===_editorRef$current||_editorRef$current.focus()}),0)}),[editorRef]),inlineToolbar=useInlineToolbar({editorRef,isReadOnly,editorState,setEditorFocus,blockKeys,allowTypes:inlineToolbarAllowTypes,setEditorState:handleChangeState,render:renderInlineToolbar}),blockToolbar=useBlockToolbar({editorRef,isReadOnly:isReadOnly||stateType===StateTypes.n.MARKDOWN,editorState,setEditorFocus,blockRenderMap,setEditorState:handleChangeState,render:renderBlockToolbar}),editorHookValue=(0,react.useMemo)((function(){return{isReadOnly,setReadOnly,editorState,editorRef,setEditorFocus,handleChangeState}}),[setEditorFocus,editorState,handleChangeState,isReadOnly]),mergeStyleBlockRenderMap=(0,react.useMemo)((function(){return Draft.DefaultDraftBlockRenderMap.merge((0,immutable_es.Map)((0,objectSpread2.Z)((0,objectSpread2.Z)({},defaultStyleBlockRenderMap),styleBlockRenderMap)))}),[styleBlockRenderMap]);return(0,react.useEffect)((function(){var _editorRef$current2;isAutoFocus&&(null===(_editorRef$current2=editorRef.current)||void 0===_editorRef$current2||_editorRef$current2.focus())}),[isAutoFocus]),(0,jsx_runtime.jsx)(context.Provider,{value:editorHookValue,children:(0,jsx_runtime.jsx)(Editor_styled_Container,{className:"Editor-root",isShowAside:(null==blockKeys?void 0:blockKeys.length)>0&&isActive&&stateType===StateTypes.n.BLOCK,children:(0,jsx_runtime.jsxs)(Placeholder,{isShow:!hasBlock,children:[(0,jsx_runtime.jsx)(Draft.Editor,{ref:editorRef,placeholder:"Начните вводить текст",readOnly:isReadOnly,editorState,blockRendererFn:blockRenderer,blockRenderMap:mergeStyleBlockRenderMap,handleReturn,handlePastedText,handleKeyCommand,handleBeforeInput,onChange:handleChangeState}),inlineToolbar,(null==blockKeys?void 0:blockKeys.length)>0&&blockToolbar]})})})};const Editor_Editor=(0,react.memo)(Editor);try{Editor.displayName="Editor",Editor.__docgenInfo={description:"",displayName:"Editor",props:{isActive:{defaultValue:{value:"true"},description:"",name:"isActive",required:!1,type:{name:"boolean"}},isAutoFocus:{defaultValue:{value:"false"},description:"",name:"isAutoFocus",required:!1,type:{name:"boolean"}},state:{defaultValue:{value:"{ blocks: [], entityMap: {} }"},description:"",name:"state",required:!1,type:{name:"RawDraftContentState"}},stateType:{defaultValue:{value:"StateTypes.MARKDOWN"},description:"",name:"stateType",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"((blocks: RawDraftContentState) => void)"}},inlineToolbarAllowTypes:{defaultValue:{value:"[]"},description:"",name:"inlineToolbarAllowTypes",required:!1,type:{name:"AllowTypes"}},renderInlineToolbar:{defaultValue:{value:"({ selection, allowTypes, onToggle }: InlineToolbarPropsType) => (\n    <InlineToolbar\n      selection={selection}\n      allowTypes={allowTypes}\n      onToggle={onToggle}\n    />\n  )"},description:"",name:"renderInlineToolbar",required:!1,type:{name:"RenderFnType"}},renderBlockToolbar:{defaultValue:{value:"({ blocks, onAdd }: BlockToolbarPropsType) => (\n    <BlockToolbar\n      blocks={blocks}\n      onAdd={onAdd}\n    />\n  )"},description:"",name:"renderBlockToolbar",required:!1,type:{name:"RenderFnType"}},styleBlockRenderMap:{defaultValue:{value:"{}"},description:"",name:"styleBlockRenderMap",required:!1,type:{name:"StyleBlockRenderMapType"}},blockRenderMap:{defaultValue:{value:"{}"},description:"",name:"blockRenderMap",required:!1,type:{name:"BlockRenderMapType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Editor/Editor.tsx#Editor"]={docgenInfo:Editor.__docgenInfo,name:"Editor",path:"src/components/Editor/Editor.tsx#Editor"})}catch(__react_docgen_typescript_loader_error){}var validator=__webpack_require__("./src/utils/validator.ts"),constants=__webpack_require__("./src/utils/blocksConverter/constants.ts");const utils_getMdString=function getMdString(){var _mdBlock$data,blocks=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],mdBlock=blocks.find((function(block){return block.type===constants.$}));return mdBlock?null===(_mdBlock$data=mdBlock.data)||void 0===_mdBlock$data?void 0:_mdBlock$data.content:""};var blocksConverter=__webpack_require__("./src/utils/blocksConverter/index.ts"),App=function App(_ref){var _ref$state=_ref.state,state=void 0===_ref$state?"":_ref$state,_ref$stateType=_ref.stateType,stateType=void 0===_ref$stateType?StateTypes.n.BLOCK:_ref$stateType,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?function(){}:_ref$onChange,isActive=_ref.isActive,isAutoFocus=_ref.isAutoFocus,renderInlineToolbar=_ref.renderInlineToolbar,renderBlockToolbar=_ref.renderBlockToolbar,inlineToolbarAllowTypes=_ref.inlineToolbarAllowTypes,styleBlockRenderMap=_ref.styleBlockRenderMap,blockRenderMap=_ref.blockRenderMap,handleDebouncedChangeState=(0,useDebouncedCallback.Z)((function(rawState){try{var blocks=(0,blocksConverter.p9)(rawState);if(stateType===StateTypes.n.MARKDOWN)return void onChange(utils_getMdString(blocks));onChange(blocks)}catch(e){console.warn(e)}}),300),editorState=(0,react.useMemo)((function(){try{if(null==state||!state.length)return(0,blocksConverter.Nv)([]);if(stateType===StateTypes.n.MARKDOWN)return(0,blocksConverter.Nv)([{type:blocksConverter.$C,data:{content:state}}]);var validateState=validator.Z.validateSync(state);return validateState?(0,blocksConverter.Nv)(validateState):(0,blocksConverter.Nv)([])}catch(e){return(0,blocksConverter.Nv)([{type:blocksConverter.$C,data:{content:"error content state"}}])}}),[stateType,state]);return(0,jsx_runtime.jsxs)(Modal_Provider,{children:[(0,jsx_runtime.jsx)(GlobalStyles,{}),(0,jsx_runtime.jsx)(Editor_Editor,{isActive,isAutoFocus,state:editorState,stateType,inlineToolbarAllowTypes,renderBlockToolbar,renderInlineToolbar,styleBlockRenderMap,blockRenderMap,onChange:handleDebouncedChangeState})]})};const App_App=(0,react.memo)(App);try{App.displayName="App",App.__docgenInfo={description:"",displayName:"App",props:{isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}},isAutoFocus:{defaultValue:null,description:"",name:"isAutoFocus",required:!1,type:{name:"boolean"}},stateType:{defaultValue:{value:"StateTypes.BLOCK"},description:"",name:"stateType",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"}]}},inlineToolbarAllowTypes:{defaultValue:null,description:"",name:"inlineToolbarAllowTypes",required:!1,type:{name:"AllowTypes"}},renderInlineToolbar:{defaultValue:null,description:"",name:"renderInlineToolbar",required:!1,type:{name:"RenderFnType"}},renderBlockToolbar:{defaultValue:null,description:"",name:"renderBlockToolbar",required:!1,type:{name:"RenderFnType"}},styleBlockRenderMap:{defaultValue:null,description:"",name:"styleBlockRenderMap",required:!1,type:{name:"StyleBlockRenderMapType"}},blockRenderMap:{defaultValue:null,description:"",name:"blockRenderMap",required:!1,type:{name:"BlockRenderMapType"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"((data: AppStateType) => void)"}},state:{defaultValue:{value:""},description:"",name:"state",required:!1,type:{name:"AppStateType"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/App/App.tsx#App"]={docgenInfo:App.__docgenInfo,name:"App",path:"src/components/App/App.tsx#App"})}catch(__react_docgen_typescript_loader_error){}}}]);